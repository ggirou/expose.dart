<link rel="import" href="packages/polymer/polymer.html">
<polymer-element name="x-expose">
  <template>
    <!--<link rel="stylesheet" href="css/expose.min.css">-->
    <style>
      :host {
        position: relative;
        width: 100%;
        height: 100%;
      
        -ms-touch-action: none;
      }
      
      .slides {
        position: absolute;
        width: 100%;
        height: 100%;
        left: 50%;
        top: 50%;
      
        overflow: visible;
        z-index: 1;
        text-align: center;
      
        -webkit-transition: -webkit-perspective .4s ease;
           -moz-transition: -moz-perspective .4s ease;
            -ms-transition: -ms-perspective .4s ease;
             -o-transition: -o-perspective .4s ease;
                transition: perspective .4s ease;
      
        -webkit-perspective: 600px;
           -moz-perspective: 600px;
            -ms-perspective: 600px;
                perspective: 600px;
      
        -webkit-perspective-origin: 0px -100px;
           -moz-perspective-origin: 0px -100px;
            -ms-perspective-origin: 0px -100px;
                perspective-origin: 0px -100px;
      }

      .slides ::content>section {
        -ms-perspective: 600px;
      }
      
      .slides ::content>section,
      .slides ::content>section>section {
        display: none;
        position: absolute;
        width: 100%;
        padding: 20px 0px;
      
        z-index: 10;
        line-height: 1.2em;
        font-weight: inherit;
      
        -webkit-transform-style: preserve-3d;
           -moz-transform-style: preserve-3d;
            -ms-transform-style: preserve-3d;
                transform-style: preserve-3d;
      
        -webkit-transition: -webkit-transform-origin 800ms cubic-bezier(0.260, 0.860, 0.440, 0.985),
                  -webkit-transform 800ms cubic-bezier(0.260, 0.860, 0.440, 0.985),
                  visibility 800ms cubic-bezier(0.260, 0.860, 0.440, 0.985),
                  opacity 800ms cubic-bezier(0.260, 0.860, 0.440, 0.985);
           -moz-transition: -moz-transform-origin 800ms cubic-bezier(0.260, 0.860, 0.440, 0.985),
                  -moz-transform 800ms cubic-bezier(0.260, 0.860, 0.440, 0.985),
                  visibility 800ms cubic-bezier(0.260, 0.860, 0.440, 0.985),
                  opacity 800ms cubic-bezier(0.260, 0.860, 0.440, 0.985);
            -ms-transition: -ms-transform-origin 800ms cubic-bezier(0.260, 0.860, 0.440, 0.985),
                  -ms-transform 800ms cubic-bezier(0.260, 0.860, 0.440, 0.985),
                  visibility 800ms cubic-bezier(0.260, 0.860, 0.440, 0.985),
                  opacity 800ms cubic-bezier(0.260, 0.860, 0.440, 0.985);
             -o-transition: -o-transform-origin 800ms cubic-bezier(0.260, 0.860, 0.440, 0.985),
                  -o-transform 800ms cubic-bezier(0.260, 0.860, 0.440, 0.985),
                  visibility 800ms cubic-bezier(0.260, 0.860, 0.440, 0.985),
                  opacity 800ms cubic-bezier(0.260, 0.860, 0.440, 0.985);
                transition: transform-origin 800ms cubic-bezier(0.260, 0.860, 0.440, 0.985),
                  transform 800ms cubic-bezier(0.260, 0.860, 0.440, 0.985),
                  visibility 800ms cubic-bezier(0.260, 0.860, 0.440, 0.985),
                  opacity 800ms cubic-bezier(0.260, 0.860, 0.440, 0.985);
      }

      .slides ::content>section {
        display: none;
        left: -50%;
        top: -50%;
      }
      
      .slides ::content>section.stack {
        padding-top: 0;
        padding-bottom: 0;
      }

      .slides .present ::content>section,
      .slides .present ::content>section>section {
        display: block;
        z-index: 11;
        opacity: 1;
      }
    
      /*********************************************
       * DEFAULT TRANSITION
       *********************************************/
      
      .slides .past ::content > section {
        display: block;
        opacity: 0;
      
        -webkit-transform: translate3d(-100%, 0, 0) rotateY(-90deg) translate3d(-100%, 0, 0);
           -moz-transform: translate3d(-100%, 0, 0) rotateY(-90deg) translate3d(-100%, 0, 0);
            -ms-transform: translate3d(-100%, 0, 0) rotateY(-90deg) translate3d(-100%, 0, 0);
                transform: translate3d(-100%, 0, 0) rotateY(-90deg) translate3d(-100%, 0, 0);
      }
      .slides .future ::content > section {
        display: block;
        opacity: 0;
      
        -webkit-transform: translate3d(100%, 0, 0) rotateY(90deg) translate3d(100%, 0, 0);
           -moz-transform: translate3d(100%, 0, 0) rotateY(90deg) translate3d(100%, 0, 0);
            -ms-transform: translate3d(100%, 0, 0) rotateY(90deg) translate3d(100%, 0, 0);
                transform: translate3d(100%, 0, 0) rotateY(90deg) translate3d(100%, 0, 0);
      }
      
      .slides .past ::content > section > section {
        display: block;
        opacity: 0;
      
        -webkit-transform: translate3d(0, -300px, 0) rotateX(70deg) translate3d(0, -300px, 0);
           -moz-transform: translate3d(0, -300px, 0) rotateX(70deg) translate3d(0, -300px, 0);
            -ms-transform: translate3d(0, -300px, 0) rotateX(70deg) translate3d(0, -300px, 0);
                transform: translate3d(0, -300px, 0) rotateX(70deg) translate3d(0, -300px, 0);
      }
      .slides .future ::content > section > section {
        display: block;
        opacity: 0;
      
        -webkit-transform: translate3d(0, 300px, 0) rotateX(-70deg) translate3d(0, 300px, 0);
           -moz-transform: translate3d(0, 300px, 0) rotateX(-70deg) translate3d(0, 300px, 0);
            -ms-transform: translate3d(0, 300px, 0) rotateX(-70deg) translate3d(0, 300px, 0);
                transform: translate3d(0, 300px, 0) rotateX(-70deg) translate3d(0, 300px, 0);
      }
    </style>
    <!-- http://www.polymer-project.org/articles/styling-elements.html -->
    <div>
      <div class="slides">
        <template repeat="{{slide in slides | enumerate}}">
          <template if="{{slide.value.vCount == 0}}">
            <div class="{{ {'past': slide.index < hIndex, 'present': slide.index == hIndex, 'future': slide.index > hIndex} }}">
              <content select="{{ slide.index | sectionNthChild }}"></content>
            </div>
          </template>
          <template if="{{slide.value.vCount > 0}}">
            <content select="section:nth-child({{ slide.index + 1 }})"></content>
          </template>
        </template>
      </div>
    </div>
  </template>
  <script type="application/dart" src="expose.dart"></script>
</polymer-element>
